# üçå Koko Eating Bananas

## üìÑ Problem Statement

Koko loves to eat bananas. There are `n` piles of bananas, where pile `i` has `v[i]` bananas. Guards will come back in `h` hours.
Each hour, Koko can choose **one** pile and eat `k` bananas from it. If the pile has fewer than `k` bananas, she eats all of them and doesn‚Äôt eat again until the next hour.

Return the **minimum integer** `k` (bananas per hour) such that Koko can eat **all** the bananas within `h` hours.

---

## üí° Intuition

* If Koko eats **very slowly** (`k` small), it takes **too many** hours.
* If Koko eats **very quickly** (`k` large), she finishes **early**, but `k` might be larger than necessary.
* The **feasible region** for `k` is `[1 ‚Ä¶ max(v)]`.
* For each candidate rate `k`, we can **simulate** the total hours needed:

  ```cpp
  totalH = Œ£ ceil(v[i] / k)
  ```
* This `totalH` is a **monotonic** function of `k`:

  * As `k` increases, `totalH` **non-increases**.
* We can binary-search on `k` to find the **smallest** rate that gives `totalH ‚â§ h`.

---

## üê¢ Brute‚ÄëForce Approach

Try every `k` from `1` to `max(v)`:

```cpp
int minEatingSpeedBrute(vector<int>& v, int h) {
    int maxPile = *max_element(v.begin(), v.end());
    for (int k = 1; k <= maxPile; ++k) {
        int totalH = 0;
        for (int x : v)
            totalH += (x + k - 1) / k; // integer ceil
        if (totalH <= h)
            return k;
    }
    return maxPile; // fallback
}
```

* **Time Complexity:** *O(max(v) ¬∑ n)*
* **Space Complexity:** *O(1)*

> ‚ùå Too slow if `max(v)` and `n` are up to 10‚Åπ and 10‚Åµ respectively.

---

## üöÄ Optimal Approach: Binary Search on Eating Speed

1. **Initialize**

   ```cpp
   int low = 1, 
       high = max(v); 
   ```
2. **While** `low ‚â§ high`:

   * Let `mid = low + (high - low) / 2` as the **candidate** speed.
   * Compute `totalH = Œ£ ceil(v[i] / mid)`.
   * If `totalH ‚â§ h`, Koko finishes in time ‚áí **try** smaller speeds ‚Üí `high = mid - 1`.
   * Else, she‚Äôs too slow ‚áí **increase** speed ‚Üí `low = mid + 1`.
3. **Return** `low` (the smallest feasible speed).

This runs in *O(n‚ÄØlog‚ÄØM)*, with `M = max(v)`.

---

## ‚úÖ Test Cases

| `v`               | `h` | Output | Explanation                                                                                                                      |
| ----------------- | --- | ------ | -------------------------------------------------------------------------------------------------------------------------------- |
| `[7,15,6,3]`      | `8` | `4`    | At `k=4`: hours = 2+4+2+1 = 9 (too slow); `k=5`: 2+3+2+1=8 OK. Smallest is `4`? Actually check: `k=4`‚Üí9>8, `k=5`‚Üí8, so answer=5. |
| `[30,11,23,4,20]` | `5` | `30`   | Must eat fastest pile one per hour to finish in 5h.                                                                              |
| `[30,11,23,4,20]` | `6` | `23`   | Check simulation shows rate 23 works.                                                                                            |
| `[3,6,7,11]`      | `8` | `4`    | Rate 4 yields 1+2+2+3=8h.                                                                                                        |
| `[1,1,1,1]`       | `4` | `1`    | Slowest speed 1 still finishes in 4h.                                                                                            |

---

## ‚úèÔ∏è Full Code with `main()` for User Input

```cpp
#include <bits/stdc++.h>
using namespace std;

/** 
 * Helper: returns the maximum element in v.
 */
int findMax(const vector<int>& v) {
    return *max_element(v.begin(), v.end());
}

/**
 * Helper: total hours needed at eating rate 'k'.
 */
long long calculateTotalHours(const vector<int>& v, int k) {
    long long total = 0;
    for (int x : v) {
        total += (x + k - 1) / k;  // integer ceil of x/k
    }
    return total;
}

/**
 * Binary-search over k to find the minimum speed so that
 * Koko eats all bananas within h hours.
 */
int minimumRateToEatBananas(const vector<int>& v, int h) {
    int low = 1, high = findMax(v);
    while (low <= high) {
        int mid = low + (high - low) / 2;
        long long hours = calculateTotalHours(v, mid);
        if (hours <= h) {
            high = mid - 1;  // try slower
        } else {
            low = mid + 1;   // need faster
        }
    }
    return low;
}

int main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr);

    int n, h;
    cin >> n >> h;
    vector<int> piles(n);
    for (int i = 0; i < n; ++i) {
        cin >> piles[i];
    }

    int k = minimumRateToEatBananas(piles, h);
    cout << k << "\n";
    return 0;
}
```

---

## üìä Complexity Analysis

| Phase                             | Time Complexity | Space Complexity |
| --------------------------------- | --------------- | ---------------- |
| `findMax`                         | *O(n)*          | *O(1)*           |
| Each `calculateTotalHours` call   | *O(n)*          | *O(1)*           |
| **Binary search** (‚âà¬†log‚ÄØM steps) | *O(n‚ÄØlog‚ÄØM)*    | *O(1)*           |
| **Overall**                       | **O(n‚ÄØlog‚ÄØM)**  | **O(1)**         |

* Where `n` = number of piles, `M` = size of the largest pile.

---

## üéØ Tips & Tricks

* Use **integer arithmetic** for `ceil(x/k)`:

  ```cpp
  (x + k - 1) / k
  ```
* Always set your binary search bounds to the **tightest** possible region: `[1 ‚Ä¶ max(v)]`.
* **Check overflow** when summing hours‚Äîuse `long long`.

---

## üîÑ Variations

1. **Different eating patterns**: Koko takes breaks or eats at variable speed‚Äîmore complex simulation.
2. **Finish exactly at time**: You might adjust to minimize `|totalH ‚Äì h|`.
3. **Multiple consumers**: Several friends eat in parallel‚Äîmultithreaded scheduling style.

---

## ‚ùì FAQs

> **Q1. Why binary search on speed?** <br>
> Because the required hours is a **monotonic** function of speed: more speed ‚Üí fewer hours.

> **Q2. What if `h < n`?** <br>
> If `h < n`, Koko must eat at least `max(v)` per hour (one pile per hour), so answer = `max(v)`.

> **Q3. Can `M` be zero?** <br>
> Pile sizes are positive by problem definition.

> **Q4. How to handle huge `h`?** <br>
> If `h ‚â• sum(v)`, Koko could eat at rate 1 and finish in time‚Äîalgorithm still works.

---
